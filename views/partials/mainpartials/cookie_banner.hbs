<div id="cookie-banner" class="cookie-banner" style="display:none">
  <p>We use cookies to improve your experience. Choose your preferences.</p>
  <div class="cookie-actions">
    <button id="accept-all">Accept all</button>
    <button id="reject-nonessential">Reject non-essential</button>
    <button id="open-settings">Settings</button>
  </div>
</div>

<script>
(function () {
  const hasConsent = document.cookie.includes('twennieConsent=');
  if (!hasConsent) document.getElementById('cookie-banner').style.display = 'block';

  function setConsent(prefs) {
    const v = {
      version: 1, necessary: true,
      functional: !!prefs.functional,
      analytics: !!prefs.analytics,
      marketing: !!prefs.marketing,
      updatedAt: new Date().toISOString()
    };
    const maxAge = 60*60*24*180; // 180 days
    document.cookie =
      "twennieConsent="+encodeURIComponent(JSON.stringify(v))+
      "; Max-Age="+maxAge+"; Path=/; SameSite=Lax"+(location.protocol==='https:'?"; Secure":"");
    location.reload();
  }

  document.getElementById('accept-all').onclick = () => setConsent({functional:true, analytics:true, marketing:true});
  document.getElementById('reject-nonessential').onclick = () => setConsent({functional:false, analytics:false, marketing:false});
  document.getElementById('open-settings').onclick = () => window.location='/privacy/cookies';
})();
</script>
